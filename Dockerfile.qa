FROM 1.15.8-alpine
LABEL maintainer="LB-Experts <lb-experts@cern.ch>"
WORKDIR /
RUN   yum -y install  git 
COPY .  .
RUN go version &&\
    go mod download &&\
    go build -o goermis .   &&\
    mkdir -p  /var/lib/ermis/ /var/log/ermis/  
    
COPY staticfiles      /var/lib/ermis/staticfiles
COPY templates        /var/lib/ermis/templates
EXPOSE 8080
ENTRYPOINT ["/goermis"]
CMD ["-config=/usr/local/etc/goermis.yaml", "-home=/var/lib/ermis/"]
